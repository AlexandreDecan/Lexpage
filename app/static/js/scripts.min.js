// Because MS sucks...
function refresh_oembed(t){t.find("a.oembed").oembed(null,{maxHeight:"400"}),t.find("span.embedly").each(function(t,e){e=$(e)
var a="http://api.embed.ly/1/extract?key=396f02e230724c218db720b2dd2daed0&url="+e.attr("data-url")
$.ajax(a).done(function(t){t.images&&t.images[0]&&t.images[0].url?e.append('<a href="'+e.attr("data-url")+'"><img src="'+t.images[0].url+'"/></a>'):e.replaceWith("")})})}function activate_tooltips(t){Modernizr.touch||($(t).find("[data-toggle='tooltip']").tooltip(),$(t).find(".avatar[title]").tooltip())}function replace_invalid_avatar(t){$(t).find("img.avatar[src='']").each(function(){$(this).attr("src",URL_PREFIX+"/static/images/avatars/default.png")}),$(t).find("img.avatar").error(function(){$(this).unbind("error").attr("src",URL_PREFIX+"/static/images/avatars/erreur404.png")})}function getCookie(t){var e=null
if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),o=0;o<a.length;o++){var i=jQuery.trim(a[o])
if(i.substring(0,t.length+1)==t+"="){e=decodeURIComponent(i.substring(t.length+1))
break}}return e}if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style")
msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(msViewportStyle)}$(document).ready(function(){replace_invalid_avatar($("body")),activate_tooltips($("body")),$("#navbarA-collapse .dropdown-toggle").closest("li").hover(function(){$("#navbarA-collapse").hasClass("in")||$(this).addClass("open")},function(){$("#navbarA-collapse").hasClass("in")||$(this).removeClass("open")}),$(".confirm-action").click(function(t){t.preventDefault(),$("#confirm-action").modal("show"),$("#confirm-action #confirm-action-yes").attr("href",$(this).attr("href"))}),refresh_oembed($("body")),notification_initialize(),$(".navbar-fixed-top").autoHidingNavbar({showOnBottom:!1}),$.ajaxSetup({beforeSend:function(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/.test(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}})})
