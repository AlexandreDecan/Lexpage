function minichat_interval_helper(t){minichat_timer_enabled=t,t?minichat_timer=setInterval(minichat_refresh,minichat_timer_delay):clearInterval(minichat_timer)}function minichat_toggle_notification(t){if(t)var i=minichat_connected_text,n=minichat_connected_classes
else var i=minichat_disconnected_text,n=minichat_disconnected_classes
$(minichat_status).attr("data-original-title")!=i&&$(minichat_status).attr("data-original-title",i),$(minichat_status_icon).attr("class")!=n&&$(minichat_status_icon).attr("class",n),minichat_interval_helper(!t)}function minichat_init_display(t,i){minichat_content=t,minichat_content_url=i,minichat_interval_helper(!0),minichat_refresh(),$(minichat_status).click(function(){websocket_minichat.reconnect()})}function minichat_init_ws(){$(minichat_status).click(function(){websocket_minichat.reconnect()})}function minichat_refresh(){$.get(minichat_content_url,function(t){$(minichat_content).html(t),replace_invalid_avatar($(minichat_content)),activate_tooltips($(minichat_content))})}function minichat_init_post(){minichat_post_url=$(minichat_form).attr("action"),$(minichat_button).click(function(t){t.preventDefault(),$(minichat_button).find("span").addClass("fa-spinner fa-spin"),minichat_post_message()})}function minichat_post_message(){$.post(minichat_post_url,$(minichat_form).serialize()).done(function(t){$(minichat_button).find("span").removeClass("fa-spinner fa-spin fa-warning btn-warning"),$(minichat_input_text).val(""),minichat_update_chars_count(),minichat_timer_enabled&&minichat_refresh()}).fail(function(t){$(minichat_button).find("span").removeClass("fa-spinner fa-spin").addClass("fa-warning")})}function minichat_update_chars_count(){var t=$(minichat_input_text).attr("maxlength")-$(minichat_input_text).val().length,i=""
t>1&&(i="s"),$(minichat_input_text).parent().toggleClass("has-warning",0==t),$(minichat_chars_output).text(t+"  caractère"+i+" restant"+i)}function minichat_init_remaining_chars(){minichat_update_chars_count(),$(minichat_input_text).change(minichat_update_chars_count),$(minichat_input_text).keyup(minichat_update_chars_count)}var minichat_timer_delay=3e4,minichat_content,minichat_content_url,minichat_post_url,minichat_timer,minichat_timer_enabled,minichat_form="#minichat_form",minichat_status="#minichat_status",minichat_status_icon="#minichat_status span",minichat_button="#minichat_form button[type='submit']",minichat_input_text="#minichat_form input[type='text']",minichat_chars_output="#minichat_form .minichat-remainingChars",minichat_connected_text="Connecté",minichat_disconnected_text="Déconnecté",minichat_connected_classes="text-success fa fa-exchange",minichat_disconnected_classes="text-danger fa fa-circle"
