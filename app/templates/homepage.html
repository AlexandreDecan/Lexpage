{% extends "__base.html" %}

{% load flatpageblock %}
{% load static %}
{% load humanize %}

{# Notice that this template does not extend something that extends 
__base.html, so you HAVE to do the job here... #}


{% block title %}Accueil | {{ block.super }}{% endblock title %}

{% block page %}

    {% flatpageblock "/edito/" as edito %}

    {% if edito.title != "-" %}
        <h2>{{ edito.title }}</h2>
        <div>{{ edito.content }}</div>

        <script>
        $(document).ready(function() {
            var hidden = $('.edito #edito-content');
            var show = $('<div id="edito-next"><span class="btn btn-xs btn-info fa fa-angle-double-down"></span></div>');
            hidden.before(show);

            show.click(function() {
                hidden.slideToggle();
                show.find('span').toggleClass('fa-angle-double-down');
                show.find('span').toggleClass('fa-angle-double-up');
            });
        });
        </script>
    {% endif %}

    <a name="blog"></a><h2>Derniers billets
    <div class="pull-right">
    {% if user.is_authenticated %}
            <a class="btn"
                href="{% url 'blog_draft_create' %}"
                data-toggle="tooltip"
                data-placement="top"
                title="Nouveau billet">
              <span class="fa fa-pencil"></span></a>
    {% endif %}
    <a class="btn"
            href="{% url 'blog_archives' %}"
            data-toggle="tooltip"
            data-placement="top"
            title="Liste des billets">
          <span class="fa fa-list"></span></a>
    <a class="btn"
            href="{% url 'blog_rss' %}"
            data-toggle="tooltip"
            data-placement="top"
            title="Flux RSS">
          <span class="fa fa-rss"></span></a>          
    </div></h2>


    <div class="container-fluid post-list-flat">
        <div class="row">
            <div class="col-xs-12 col-sm-6">
                {% include 'blog/_post_inlist_flat.html' with post=post_list.0 style="post-item-large" embed=True %}
            </div>
            <div class="col-xs-12 col-sm-6">
                {% include 'blog/_post_inlist_flat.html' with post=post_list.1 style="post-item-large" embed=True %}
            </div>
        </div>
        <div class="clearfix visible-block-md"></div>
        <div class="row">
            {% for post in post_list|slice:"2:5" %}
                <div class="col-xs-12 col-sm-4">
                    {% include 'blog/_post_inlist_flat.html' with post=post style="post-item-small" %}
                </div>
            {% endfor %}
        </div>
    </div>

    <span class="badge intensity-0-bg">0</span><span class="badge intensity-1-bg">1</span><span class="badge intensity-2-bg">2</span><span class="badge intensity-3-bg">3</span><span class="badge intensity-4-bg">4</span><span class="badge intensity-5-bg">5</span><span class="badge intensity-6-bg">6</span><span class="badge intensity-7-bg">7</span><span class="badge intensity-8-bg">8</span><span class="badge intensity-9-bg">9</span><span class="badge intensity-10-bg">10</span><span class="badge intensity-11-bg">11</span><span class="badge intensity-12-bg">12</span><span class="badge intensity-13-bg">13</span><span class="badge intensity-14-bg">14</span><span class="badge intensity-15-bg">15</span><span class="badge intensity-16-bg">16</span><span class="badge intensity-17-bg">17</span><span class="badge intensity-18-bg">18</span><span class="badge intensity-19-bg">19</span><span class="badge intensity-20-bg">20</span><span class="badge intensity-21-bg">21</span><span class="badge intensity-22-bg">22</span><span class="badge intensity-23-bg">23</span><span class="badge intensity-24-bg">24</span><span class="badge intensity-25-bg">25</span><span class="badge intensity-26-bg">26</span><span class="badge intensity-27-bg">27</span><span class="badge intensity-28-bg">28</span><span class="badge intensity-29-bg">29</span><span class="badge intensity-30-bg">30</span><span class="badge intensity-31-bg">31</span><span class="badge intensity-32-bg">32</span><span class="badge intensity-33-bg">33</span><span class="badge intensity-34-bg">34</span><span class="badge intensity-35-bg">35</span><span class="badge intensity-36-bg">36</span><span class="badge intensity-37-bg">37</span><span class="badge intensity-38-bg">38</span><span class="badge intensity-39-bg">39</span><span class="badge intensity-40-bg">40</span><span class="badge intensity-41-bg">41</span><span class="badge intensity-42-bg">42</span><span class="badge intensity-43-bg">43</span><span class="badge intensity-44-bg">44</span><span class="badge intensity-45-bg">45</span><span class="badge intensity-46-bg">46</span><span class="badge intensity-47-bg">47</span><span class="badge intensity-48-bg">48</span><span class="badge intensity-49-bg">49</span><span class="badge intensity-50-bg">50</span><span class="badge intensity-51-bg">51</span><span class="badge intensity-52-bg">52</span><span class="badge intensity-53-bg">53</span><span class="badge intensity-54-bg">54</span><span class="badge intensity-55-bg">55</span><span class="badge intensity-56-bg">56</span><span class="badge intensity-57-bg">57</span><span class="badge intensity-58-bg">58</span><span class="badge intensity-59-bg">59</span><span class="badge intensity-60-bg">60</span><span class="badge intensity-61-bg">61</span><span class="badge intensity-62-bg">62</span><span class="badge intensity-63-bg">63</span><span class="badge intensity-64-bg">64</span><span class="badge intensity-65-bg">65</span><span class="badge intensity-66-bg">66</span><span class="badge intensity-67-bg">67</span><span class="badge intensity-68-bg">68</span><span class="badge intensity-69-bg">69</span><span class="badge intensity-70-bg">70</span><span class="badge intensity-71-bg">71</span><span class="badge intensity-72-bg">72</span><span class="badge intensity-73-bg">73</span><span class="badge intensity-74-bg">74</span><span class="badge intensity-75-bg">75</span><span class="badge intensity-76-bg">76</span><span class="badge intensity-77-bg">77</span><span class="badge intensity-78-bg">78</span><span class="badge intensity-79-bg">79</span><span class="badge intensity-80-bg">80</span><span class="badge intensity-81-bg">81</span><span class="badge intensity-82-bg">82</span><span class="badge intensity-83-bg">83</span><span class="badge intensity-84-bg">84</span><span class="badge intensity-85-bg">85</span><span class="badge intensity-86-bg">86</span><span class="badge intensity-87-bg">87</span><span class="badge intensity-88-bg">88</span><span class="badge intensity-89-bg">89</span><span class="badge intensity-90-bg">90</span><span class="badge intensity-91-bg">91</span><span class="badge intensity-92-bg">92</span><span class="badge intensity-93-bg">93</span><span class="badge intensity-94-bg">94</span><span class="badge intensity-95-bg">95</span><span class="badge intensity-96-bg">96</span><span class="badge intensity-97-bg">97</span><span class="badge intensity-98-bg">98</span><span class="badge intensity-99-bg">99</span><span class="badge intensity-100-bg">100</span>


    <a name="board"></a><h2>Discussions récentes
    <div class="pull-right">
    {% if user.is_authenticated %}
            <a class="btn"
                href="{% url 'board_create' %}"
                data-toggle="tooltip"
                data-placement="top"
                title="Nouvelle discussion">
              <span class="fa fa-pencil"></span></a>
    {% endif %}
    <a class="btn"
            href="{% url 'board_latests' %}"
            data-toggle="tooltip"
            data-placement="top"
            title="Discussions récentes">
          <span class="fa fa-clock-o"></span></a>
    <a class="btn"
            href="{% url 'board_archives' %}"
            data-toggle="tooltip"
            data-placement="top"
            title="Liste des discussions">
          <span class="fa fa-list"></span></a>
    <a class="btn"
            href="{% url 'board_rss' %}"
            data-toggle="tooltip"
            data-placement="top"
            title="Flux RSS">
          <span class="fa fa-rss"></span></a>          
    </div></h2>


    {% for thread in threads.object_list %}
        {% include "board/_thread_inlist.html" with thread=thread action=False %}
    {% endfor %}

    <div align="center">
        {% include "_pagination.html" with page_obj=threads page_url='board_latests' %}
    </div>

{% endblock page %}

{% block sidebar_context %}
{% endblock %}
